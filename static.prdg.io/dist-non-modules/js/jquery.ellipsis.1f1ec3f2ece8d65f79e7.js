!function(l){l.fn.ellipsis=function(a){return a=l.extend({row:1,onlyFullWords:!1,char:"...",callback:function(){},position:"tail"},a),this.each((function(){var t=l(this),i=t.html(),h=i,c=h.length,e=t.height();t.html("a");var o=parseFloat(t.css("lineHeight"),10),r=t.height(),s=(o>r?o-r:0)*(a.row-1)+r*a.row;if(e<=s)return t.html(i),void a.callback.call(this);var n=1,f=0,u=i.length;if("tail"===a.position){for(;n<u;)f=Math.ceil((n+u)/2),t.html(i.slice(0,f)+a.char),t.height()<=s?n=f:u=f-1;i=i.slice(0,n),a.onlyFullWords&&(i=i.replace(/[\u00AD\w\uac00-\ud7af]+$/,"")),i+=a.char}else if("middle"===a.position){for(var d=0;n<u;)f=Math.ceil((n+u)/2),d=Math.max(c-f,0),t.html(h.slice(0,Math.floor((c-d)/2))+a.char+h.slice(Math.floor((c+d)/2),c)),t.height()<=s?n=f:u=f-1;d=Math.max(c-n,0);var m=h.slice(0,Math.floor((c-d)/2)),M=h.slice(Math.floor((c+d)/2),c);a.onlyFullWords&&(m=m.replace(/[\u00AD\w\uac00-\ud7af]+$/,"")),i=m+a.char+M}t.html(i),a.callback.call(this)})),this}}(jQuery);