!function(e){"use strict";var s=e(window),t=e(".sbResultsSliderToggleBtn"),i=e(".sbResultsSliderToggle");function l(){e("#sbResultsBg").css({top:e("#promoBanner").height(),height:e("#sbResultsOuterCont").height()+t.height()})}function r(){var r=s.width(),a=i.closest(".sbResultsSlider").find(".viewport"),o=e(".shResultTopMerchant"),d=e(".shResultRelatedMerchant"),h=e("#sbResultsDivider"),n=e("#sbResultsTopMerchants"),u=(e("#sbResultsTopMerchantsList"),e("#sbResultsRelatedMerchants")),R=e("#sbResultsRelatedMerchantsList"),g=o.length,c=d.length,b=e("#sbResultsCont");function v(e,s){b.addClass("divideResultsRows"),n.toggleClass("resultsAutoHeight",e),u.toggleClass("resultsAutoHeight",s)}function w(){b.removeClass("divideResultsRows"),a.addClass("viewportFixedHeight")}if(g>1&&(document.getElementById("sbResultsTitle").innerHTML="Top results:"),g>0&&c>0&&(b.addClass("sbResultPrimeAndRelated"),R.removeClass("sbStartNewRow"),sbHelpers.isMobile())){var C=a.innerWidth(),p=o.outerWidth(!0),m=d.outerWidth(!0),H=h.outerWidth(!0),f=Math.ceil(C/p);o.length%f*p+m+H>C&&R.addClass("sbStartNewRow")}!sbHelpers.isMobile()&&g>0&&c>0?(g>=5&&R.hide(),r>=1260?g>=3?v():w():r>=1060?g>=2?v():w():r>=600?v():v(!0,!0),g+c>5?(i.show(),t.attr("id","sbSelectMerchantsSliderToggle")):(i.hide(),t.removeClass("active"))):e.each(i,(function(){var s,t=e(this),i=t.find(".sbResultsSliderToggleBtn"),l=(a.outerHeight(),a.find(".sbResultsList")),o=l.find(".sbResultItem"),d=o.length;s=r<420?340:r<600?390:250,d>2?l.outerHeight()-parseInt(o.css("margin-bottom"))>=s?(t.show(),i.hasClass("active")?(a.removeClass("viewportFixedHeight"),i.text("View Fewer Results")):(a.addClass("viewportFixedHeight"),i.text("View All Results"))):(a.removeClass("viewportFixedHeight"),t.hide()):1===d&&(r<420?o.addClass("sbResultItemVertical"):o.removeClass("sbResultItemVertical"))})),l()}t.bind("click",(function(){var s=e(this),t=s.closest(".sbResultsSlider").find(".viewport");t.hasClass("viewportFixedHeight")?(t.removeClass("viewportFixedHeight"),s.text("View Fewer Results"),s.addClass("active")):(t.addClass("viewportFixedHeight"),s.text("View All Results"),s.removeClass("active")),l()})),r(),s.bind("load resize",r)}(jQuery);