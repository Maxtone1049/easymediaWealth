sbGlbl.sbHomeAd=function(){var r={wrapper:$("#cardDeck"),$body:sbPage.$body,impressionScriptFired:[],strHeaderName:"Featured",strAboutHeading:"About Offer",strCta:"View Offer"},a=$.template('<section id="sbHomeCard{{html cardId}}-{{html trayId}}" class="sbCard sbHomeCard toutLikeCard featuredCard{{if typeof disclaimer !== "undefined" && disclaimer}} withTerms{{/if}} sbCard{{if typeof isTrackable === "undefined" || ! isTrackable}}Not{{/if}}Trackable{{if typeof discoverBonusAmount !== "undefined" && discoverBonusAmount > 0}} sbBonusAwardCard{{/if}}"><header id="sbTrayListItemHeader{{html cardId}}-{{html trayId}}" class="sbTrayListItemHeader"><div class="sbTrayListItemHeaderImgContainerWrapper"><img id="sbTrayListItemHeaderImgContainer{{html cardId}}-{{html trayId}}" class="sbTrayListItemHeaderImgContainer" loading="lazy" alt="{{html header}}" src="{{if typeof pImageId !== "undefined" && pImageId > 0}}'+pImagePath+"{{html image}}?v={{html getImgVersion( cardId || id )}}{{else}}"+sbHelpers.getExternalContentPath("NOTIFICATIONS_FEATURED_CARD")+'/featuredCard{{html cardId || id}}.jpg?v={{html getImgVersion( cardId || id )}}{{/if}}"></div><p id="cardHeader{{html cardId}}-{{html trayId}}" class="sbTrayListItemHeaderCaption cardHeader" data-notranslate>{{html header}}</p></header><p class="sbTrayListItemSbContainer">{{if earn}}<span class="sbTrayListItemSbEarn sbPrimaryColor" id="cardSBValue{{html cardId}}-{{html trayId}}"><span class="sbEarn">{{html sbCards.getCtaCopyCards( trayId, upTo, this.data.perDollar )}}</span><span id="cardSBValueAmt{{html cardId}}-{{html trayId}}">{{if upTo}}<span class="sbUpToPromotion">up to </span>{{/if}}<span class="sbRewardValue"><var>{{html earnValue}}</var></span></span>{{html sbCards.getPerCurrencyPayoutMarkup( this.data.perDollar, 1 )}}</span>{{else}}&nbsp;{{/if}}</p><span id="cardTypeName{{html cardId}}-{{html trayId}}" class="sbTrayListItemSbType">'+r.strHeaderName+'</span>{{if typeof discoverBonusAmount !== "undefined" && discoverBonusAmount > 0}}<p class="discoverBonusAwardValueContainer"><span class="discoverBonusAwardValue"><var data-var="num">+ {{html discoverBonusAmount}} <span class="discoverBonusSbCurrency">SB</span></var> bonus</span></p>{{/if}}<button class="sbTrayListItemLink sbCta" tabindex="-1"><span class="sbVisuallyHidden">{{html header}}</span></button></section>');function e(a,e){return this.wrapper=r.wrapper,this.json=a,this.id=this.json.id,this.isNtf=e,this.build(),this}return e.prototype.build=function(){var e=sbGlbl.getCardsLocation(),s=this.json,t=$.extend(s,{specialTerms:s.disclaimer,realCardId:s.cardId,cardId:(sbHelpers.isNumeric(s.id)?Math.abs(s.id):s.id)+"-"+s.cardTypeID,boolIsCardTypeIdNumeric:!1,boolIsShopCard:!1,boolIsShopCardSwagUpPromo:!1,boolIsWatchCard:!1,boolIsNcraveCard:!1,boolIsAnswerCard:!1,boolIsAnswerCardBonus:!1,boolIsAnswerCardPromo:!1,boolIsAnswerCardBonusExpiration:!1,hasNcraveEarnAmountShown:!1,boolUseQuickLook:"Discover"===s.strChannel,hasNcraveTrayRedesign:!1,aboutHeading:r.strAboutHeading,currentLocationId:e.locationID,currencySymbol:e.currencySymbol,currencyName:e.currencyName.toLowerCase(),cta:r.strCta});this.isNtf&&$.extend(t,{perDollar:s.link.indexOf("shopredir")>=0});var d=t.earn;return d&&(!0===t.perDollar&&(t.cashBackPercent=sbCards.calculateCashBackPercent(d)),t.earnValue=sbCards.getEarnValue(d)),t=sbCards.setCaptionLines(t),this.banner=$.tmpl(a,t),this.banner.data(t),t.featuredOrPremiumFinalTargetUrl=this.generateLink(),this.closeButton=this.banner.find(".cardClose").first(),this.addClick().addClose(),t.impressionScript&&t.impressionScript.length&&$.inArray(this.id,r.impressionScriptFired)<0&&(r.impressionScriptFired.push(this.id),this.impressionScript=t.impressionScript,this.addPixel()),2696==this.id&&$('<img class="isPixel" src="//view.atdmt.com/MRT/view/468782414/direct;wi.1;hi.1/01/" alt="">').appendTo("body"),this},e.prototype.addPixel=function(){var a=this.impressionScript;a&&(sbHelpers.isScriptUrl(a)?sbHelpers.injectImpressionScriptTag(a,this.cardId,this.banner):r.$body.append('<div style="display: none;">'+a.replace(/@MemberID@/g,sbGlbMember)+"</div>"))},e.prototype.generateLink=function(){var r=this.json;if(void 0!==r.link){var a=r.link.replace(/@MemberID@/g,sbGlbMember).replace("tag=","ntfCmd="+featuredCardProps.ntfCmd+"&mid="+sbGlbMember+"&tag=");if(r.cardTypeID&&this.id<0){var e=r;return"/?cmd=card-click&card_id="+e.realCardId+"&pos="+getRealCardPos(this.banner)+"&card_type="+e.cardTypeId+"&trayId="+r.trayId+"&trkId="+e.trkId+"&link="+encodeURIComponent(decodeURIComponent(a))+(e.appendAfterLink||"")}return a}},e.prototype.addClick=function(){var r=this,a=this.banner;return this.clickAction=this.generateLink(),a.click((function(e){if(e.hasOwnProperty("originalEvent")){e.stopPropagation();var s=$(this),t=s.data(),d=t.trayId;if(!sbHelpers.isNumeric(d)){d=sbCards.getTrayId(s);sbHelpers.isNumeric(d)&&s.data("trayId",d)}sbCards.trackGaDataForCardClicks(t,s,e),sbCards.boolUseQuickLook&&a.data("boolUseQuickLook")&&!sbCards.shouldUseOfferModalInsteadOfFlyout(t.cardTypeId,t.trayId,t.integrationTypeID,t.isSuppressModal,t.earn)&&!t.isSuppressModal?sbQuickLook.show(a,!0):sbCards.shouldUseOfferModalInsteadOfFlyout(t.cardTypeId,t.trayId,t.integrationTypeID,t.isSuppressModal,t.earn)?sbCards.handleOfferModal({cardData:r.json,redirectUrl:r.clickAction}):sbHelpers.isMember()?r.json.targetBlank?window.open(r.clickAction).focus():window.location=r.clickAction:(sbCards.redirectOnCardClick(t.cardTypeId,r.clickAction),$cardInfoTipWrap.hide())}})),this},e.prototype.addClose=function(){var r=this;return this.closeButton.click((function(a){a.stopPropagation(),sbGlbl.sbHome.animateCloseCard(r.banner);var e=r.json.cardTypeID&&r.id<0?"/?cmd=card-jx-hide&card_id="+r.json.realCardId+"&trkId="+r.json.trkId:"/?cmd=co-ntfclosed&ntfCmd="+featuredCardProps.ntfCmd+"&mid="+sbGlbMember+"&ntfID="+r.id;$.post(e,(function(r){r.charAt(0)}))})),this},{createFeaturedCards:function(r,a,s){for(var t,d=$(),i=0,n=r.length;i<n;i++)(t=r[i]).id<0&&void 0===t.trayId||("string"==typeof s&&""!==s&&(t.strChannel=s),d=d.add(new e(t,a).banner));return d}}}();