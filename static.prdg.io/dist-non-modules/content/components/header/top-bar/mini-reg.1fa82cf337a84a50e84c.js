"undefined"==typeof sbtbDomain&&(sbtbDomain=""),"undefined"==typeof sbDoLoginPost&&(sbDoLoginPost=!0),ajaxProxy=document.getElementById("ajax-proxy"),jQuery.ajaxSetup({converters:{"text json":function(e){return e&&e.length>9&&"while(1);"==e.substring(0,9)&&(e=e.substring(9)),jQuery.parseJSON(e)}}});var onloadRegVars={};sbxJxRegVars={},sbxJxAjaxVars={isPostingData:!1,isRetrying:!1,shouldReloadOnReg:!1};var emailAddressStrokeCount=0,emailAddressClickCount=0,passwordStrokeCount=0,passwordClickCount=0,passwordConfirmStrokeCount=0,passwordConfirmClickCount=0;function ErrorCollection(){}!function(){var e=sbHelpers.getJsonScriptContent(document.getElementById("passwordInfo")),s={sbtbDomain:sbtbDomain,minLength:e.minLength,maxLength:e.maxLength},r=sbHelpers.getRegistrationErrorMessageList(s);function a(){sbPage.signupFormLoadingAsynchronously?function(){var e=new CustomEvent("registrationScriptExecuted");sbPage.initSignupForm=n,window.dispatchEvent(e)}():n()}function n(){var e="undefined"!=typeof sbGlbl_IsLoginLanding&&sbGlbl_IsLoginLanding;onloadRegVars=jQuery.extend({},sbxJxRegFunctions.setVariables()),sbxJxRegFunctions.setUpErrors(),sbxJxRegUx.attachEvents(),sbxJxRegVars.canEnterPromoCode=sbxJxRegVars.fldPromocode.length>0,sbxJxRegVars.submitFormBtn.add(sbxJxRegVars.submitFormBtnNoSbInstall).unbind().bind("click",(function(e){if(sbPage.preventableSignupFormSubmit&&e.preventDefault(),"Reg"==sbxJxRegVars.curOption){if(t())return e.preventDefault(),!1;var s=$(this).data("custom-url")||"",r="undefined"!=typeof emailOnly||sbPage.emailOnlySignup;sbxJxRegFunctions.handleRegister(r,s),jQuery("#loggedOutTermsLnk").show(),sbHelpers.trackData({eventCategory:sbPage.loggedOutName,eventAction:"CTA Click",eventLabel:"Sign Up Registration"})}else jQuery("#glblWelcomeLoginAction").show(),sbxJxRegFunctions.handleLogin()})),jQuery("#sbxJxRegBtnSubmitInline").add(".sbSignUpCta").add(sbxJxRegVars.submitFormBtnNoSbInstall).unbind().bind("click",(function(e){if(t())return e.preventDefault(),!1;onloadRegVars=jQuery.extend({},sbxJxRegFunctions.setVariables()),i($(this))})),jQuery("#sbxJxRegBtnSubmitModal").add(".sbSignUpCta").add(sbxJxRegVars.submitFormBtnNoSbInstall).unbind().bind("click",(function(e){onloadRegVars=jQuery.extend({},sbxJxRegFunctions.setModalVariables()),i($(this))})),sbxJxRegVars.submitFormBtnGoogleNative.bind("click",(function(){sbGlbl.sbTb.googleNativeRegister(sbxJxRegVars.regMethod),sbHelpers.trackData({eventCategory:sbPage.loggedOutName,eventAction:"CTA Click",eventLabel:"Google Registration"})})),"undefined"!=typeof sbGlbl_LoginError&&(0!=$("form.loginForm:visible").length||e?window.setTimeout((function(){sbxJxRegUx.renderError({login:[sbGlbl_LoginError]})}),e?0:1e3):sbGlbl.sbTb.toggleLoginPopover({onShow:function(){sbxJxRegUx.renderError({login:[sbGlbl_LoginError]})}}))}function t(){for(var e=Array.from(document.querySelectorAll(".signupLegalConsentCheckbox"));e.length;){var s=e.shift();if(!s.disabled&&!s.checked)return s.focus(),!0}return!1}function i(e){sbPage.preventableSignupFormSubmit&&event.preventDefault();var s="undefined"!=typeof emailOnly||sbPage.emailOnlySignup,r=e.data("custom-url")||"",a=e.data("reload-on-reg"),n=void 0===a||a;sbxJxAjaxVars.shouldReloadOnReg=n,sbxJxRegFunctions.handleRegister(s,r)}window.sbxJxRegFunctions={fetchPostData:function(e,s){var r={emailAddress:this.getActiveFormEmail().val(),password:sbxJxRegVars.fldPass.val(),firstName:sbxJxRegVars.fldFirstName.val(),lastName:sbxJxRegVars.fldLastName.val(),customRedirectURL:s||"",regMethod:sbxJxRegVars.regMethod,optIn:sbxJxRegVars.fldOptIn.is(":checked"),emailAddressStrokeCount:emailAddressStrokeCount,emailAddressClickCount:emailAddressClickCount,passwordStrokeCount:passwordStrokeCount,passwordClickCount:passwordClickCount,passwordConfirmStrokeCount:passwordConfirmStrokeCount,passwordConfirmClickCount:passwordConfirmClickCount};return sbxJxRegVars.canEnterPromoCode&&sbxJxRegVars.fldPromocode.val().length>0&&sbxJxRegVars.fldPromocode.val()!=sbxJxRegVars.fldPromocode.attr("placeholder")&&(r.promoCode=sbxJxRegVars.fldPromocode.val()),(jQuery("#persist").is(":checked")&&jQuery("#sbGlobalNavLoginDropdown").is(":visible")||jQuery("#persistMinireg").is(":checked")&&jQuery("#glblSignUpInitial").is(":visible")&&"Login"==sbxJxRegVars.curOption||sbGlbl.autoPersist)&&(r.persist="on"),r.ioBlackBox=jQuery("#ioBlackBox").val(),r[jQuery(sbxJxRegVars.regAuthToken).attr("name")]=jQuery(sbxJxRegVars.regAuthToken).val(),"Reg"==sbxJxRegVars.curOption&&sbHelpers.isMobile()&&(r.cmp=sbxJxRegVars.cmp,r.aff_sid=sbxJxRegVars.aff_sid,r.customRedirectURLMobile=r.customRedirectURL,r.customRedirectURL=r.customRedirectURL||"/?cmd=m-switch&amp;on=1"),sbxJxRegVars.fldCxid.length&&(r.aff_sid=jQuery.trim(sbxJxRegVars.fldCxid.val())),r},handleRegister:function(e,s){if(this.validateLocalReg(e)&&!sbxJxAjaxVars.isPostingData){sbxJxAjaxVars.isPostingData=!0,"undefined"!=typeof c_trackStep&&c_trackStep(11,{action:"submitReg"});var r=this.fetchPostData(void 0,s);this.remoteCall({handler:"registration",data:r,callback:this.onRegSuccess})}},validateLocalReg:function(s){s=s||!1;var r,a=new ErrorCollection,n=/^([a-zA-Z0-9_.-])+@([a-zA-Z0-9_.-])+\.([a-zA-Z])+([a-zA-Z])+/,t=this.getActiveFormEmail();return t.val().length<1?a.push("emailAddress","EmailAddress_NonEmpty"):t.val().length<6?a.push("emailAddress","EmailAddress_Length"):n.test(t.val())||a.push("emailAddress","EmailAddress_ValidEmail"),!s&&sbxJxRegVars.fldPass.val().length<1?a.push("password","Password_NonEmpty"):!s&&sbxJxRegVars.fldPass.val().length<e.minLength?a.push("password","Password_Length"):s||void 0!==sbGlbl.showConfirmPassword&&!sbGlbl.showConfirmPassword||jQuery(sbxJxRegVars.fldPass).val()==jQuery(sbxJxRegVars.fldPassConfirm).val()||a.push("password","Password_IsMatch"),!s&&(r=sbxJxRegVars.fldCxid.attr("data-validate"))&&(sbxJxRegVars.fldCxid.val().length==r&&sbHelpers.isNumeric(sbxJxRegVars.fldCxid.val())||a.push("cxid","Cxid_Not_Match")),!!a.isEmpty()||(sbxJxRegUx.renderError(a),!1)},handleLogin:function(){if($("#sbxJxRegEmail[name=emailAddressMini]").attr("name","emailAddress"),this.validateLocalLogin()&&!sbxJxAjaxVars.isPostingData){var e=this.fetchPostData();sbxJxAjaxVars.isPostingData=!0,this.remoteCall({handler:"login",data:e,callback:this.onLoginSuccess})}},validateLocalLogin:function(){var e=new ErrorCollection;return sbxJxRegVars.fldEmail.val().length<1&&e.push("emailAddress","EmailAddress_NonEmpty"),sbxJxRegVars.fldPass.val().length<1&&e.push("password","Password_NonEmpty"),!!e.isEmpty()||(sbxJxRegUx.renderError(e),!1)},onRegSuccess:function(e,s){if(sbxJxAjaxVars.isPostingData=!1,void 0!==e.allowLogin&&!1===e.allowLogin)return location.href=sbtbDomain+"/?cmd=sb-404";if(e.success){try{localStorage.setItem("isNewlyRegisteredSbUser","1")}catch(e){document.cookie="isNewlyRegisteredSbUser=1"}if("undefined"!=typeof c_trackStep&&c_trackStep(21,{action:"onRegSuccess"}),"function"==typeof fbq&&fbq("track","CompleteRegistration"),"undefined"!=typeof ssuCustomRegCallback&&jQuery.isFunction(ssuCustomRegCallback))return ssuCustomRegCallback(e,s),!0;var r=sbPage.regFormSuccessCallback;return sbHelpers.getType("function",r)?(r(e,s),!0):(sbPage.regRedirectToBePostponed?sbPage.regCallback=sbxJxRegUx.renderLogin.bind(e,"reg",s):sbxJxRegUx.renderLogin(e,"reg",s),!0)}return e.errors?("undefined"!=typeof c_trackStep&&c_trackStep(11,{action:"onRegErrors",errors:e.errors}),sbxJxRegUx.renderError(e.errors),!1):e.newToken?(jQuery(sbxJxRegVars.regAuthToken).val(e.newToken),sbxJxAjaxVars.isRetrying?void 0:(sbxJxAjaxVars.isRetrying=!0,sbxJxRegFunctions.handleRegister("undefined"!=typeof emailOnly||sbPage.emailOnlySignup,window.customRedirectUrl||sbPage.postSignupRedirectUrl),!0)):("undefined"!=typeof c_trackStep&&c_trackStep(11,{action:"onRegErrors",error:"fatal"}),alert("The page encountered an error. Please try again."),!1)},onLoginSuccess:function(e){if(sbxJxAjaxVars.isPostingData=!1,e.success)"undefined"!=typeof ssuCustomLoginCallback&&jQuery.isFunction(ssuCustomLoginCallback)?ssuCustomLoginCallback(e):sbxJxRegUx.renderLogin(e,"login");else if(e.errors)sbxJxRegUx.renderError(e.errors);else if(e.newToken){if(jQuery("#sbxJxRegAuthToken").val(e.newToken),!sbxJxAjaxVars.isRetrying)return sbxJxAjaxVars.isRetrying=!0,void sbxJxRegFunctions.handleLogin()}else alert("The page encountered an error. Please try again.");sbxJxAjaxVars.isRetrying=!1},remoteCall:function(e){"undefined"!=typeof doAjaxProxyTrustedPost?doAjaxProxyTrustedPost(e):jQuery.ajax({type:"POST",url:"/?cmd=ac-"+e.handler+"-post",data:e.data||{},success:e.callback||this.noop,complete:this.stopDualSubmits,dataType:"JSON"})},noop:function(){},stopDualSubmits:function(){var e=sbPage.submitCtaIds;if(e)for(var s in sbPage.submitCtaIds)Object.prototype.hasOwnProperty.call(e,s)&&sbHelpers.stopDualSubmit(document.getElementById(e[s]))},setVariables:function(){return jQuery.extend(sbxJxRegVars,{curOption:void 0===sbxJxRegVars.curOption?"Reg":sbxJxRegVars.curOption,inputFldErrorClass:"SEInputError",inputFldNotificationClass:"SEInputNotification",inputErrMsgClass:"SEErrortip",inputNotificationMsgClass:"SENotification",fldEmail:jQuery("#sbxJxRegEmail"),fldEmail2:jQuery(".sbSignUpEmail"),fldPass:jQuery("#sbxJxRegPswd"),fldPassConfirm:jQuery("#sbxJxRegEmailConfirm"),fldPromocode:jQuery("#signUpCodeInput"),submitFormBtn:jQuery("#sbxJxRegBtnSubmit").add(".sbSignUpCta"),submitFormBtnNoSbInstall:jQuery("#sbxJxRegBtnSubmitNoSbInstall"),submitFormBtnGoogleNative:jQuery("#sbRegFormGoogleNativeCta"),fldCxid:jQuery("#sbxJxRegSpiritNumber"),fldFirstName:jQuery("#firstName"),fldLastName:jQuery("#lastName"),fldOptIn:jQuery("#sbxJxRegOptin"),regMethod:sbxJxRegFunctions.getRegMethod(),regAuthToken:"#sbxJxRegAuthToken",showErrorMsgInline:!1})},setModalVariables:function(){return jQuery.extend(sbxJxRegVars,{fldEmail:jQuery("#sbxJxRegEmailModal"),regAuthToken:"#sbxJxRegAuthTokenModal",showErrorMsgInline:!0})},getRegMethod:function(){return sbHelpers.isMobile()?4:jQuery("#glblSignUpInitial").is(":visible")?3:2},updateRegVariables:function(e){jQuery.extend(sbxJxRegVars,e)},setUpErrors:function(){sbxJxRegUx.errorMsgs={EmailAddress_NonEmpty:{elms:Array(sbxJxRegVars.fldEmail)},EmailAddress_Length:{elms:Array(sbxJxRegVars.fldEmail)},EmailAddress_ValidEmail:{elms:Array(sbxJxRegVars.fldEmail)},EmailAddress_NotExists:{elms:Array(sbxJxRegVars.fldEmail)},EmailAddress_AlreadyMember:{elms:Array(sbxJxRegVars.fldEmail)},EmailAddress_NotBlackList:{elms:Array(sbxJxRegVars.fldEmail)},Password_NonEmpty:{elms:Array(sbxJxRegVars.fldPass,sbxJxRegVars.fldPassConfirm)},Password_Length:{elms:Array(sbxJxRegVars.fldPass,sbxJxRegVars.fldPassConfirm)},Password_NonBlacklisted:{elms:Array(sbxJxRegVars.fldPass,sbxJxRegVars.fldPassConfirm)},Login_IsValid:{elms:Array(sbxJxRegVars.fldEmail,sbxJxRegVars.fldPass)},Login_NotIsBlocked:{elms:Array(sbxJxRegVars.fldEmail,sbxJxRegVars.fldPass)},Login_IsDeactivated:{elms:Array(sbxJxRegVars.fldEmail,sbxJxRegVars.fldPass)},SwagCode_IsValid:{elms:Array(sbxJxRegVars.fldPromocode)},EmailUsername_NonEmpty:{elms:Array(sbxJxRegVars.fldEmail)},Password_IsMatch:{elms:Array(sbxJxRegVars.fldPass,sbxJxRegVars.fldPassConfirm)},Genric_Msg:{elms:Array(sbxJxRegVars.fldEmail)},Location_AcceptsRegistration:{elms:Array(sbxJxRegVars.fldEmail)},IPAddress_NotBlacklisted:{elms:Array(sbxJxRegVars.fldEmail)},Cxid_Not_Match:{elms:Array(sbxJxRegVars.fldCxid)},SocialMember_NotExists:{elms:Array(sbxJxRegVars.fldEmail)},SignatureError:{elms:Array(sbxJxRegVars.fldEmail)},EmailAddress_NoAccess:{elms:Array(sbxJxRegVars.fldEmail)},Captcha_Fail:{elms:Array(sbxJxRegVars.fldEmail)},Failed:{elms:Array(sbxJxRegVars.fldEmail)}}},getActiveFormEmail:function(){var e=sbxJxRegVars.fldEmail;if(!e.closest("form").is(":visible"))for(var s=sbxJxRegVars.fldEmail2,r=0,a=s.length;r<a;r++){var n=s[r];if(n.closest("form").offsetHeight){e=$(n);break}}return e}},window.sbxJxRegUx={renderLogin:function(e,s,r){var a="";if(a="undefined"!=e.campaignRedirect?e.redirectURL:$("#SESignUpInitial").attr("data-src-link"),sbxJxAjaxVars.isPostingData=!0,"reg"==s){var n;if("object"==typeof gaEventTrack){var t=gaEventTrack.action;void 0!==t&&(n=t)}sbHelpers.trackData({eventCategory:"Member UX",eventAction:"New Registration",eventLabel:n});var i=(new Date).getTime();$("body").append('<iframe id="iPixel" style="display:none" src="'+sbtbDomain+"/?cmd=gn-mini-reg-pixel&rnd="+i+'"></iframe>'),document.getElementById("iPixel").onload=function(){sbxJxRegUx.handlePostRegRedirect(r,a,e)},window.setTimeout((function(){sbxJxRegUx.handlePostRegRedirect(r,a,e)}),5e3)}else void 0!==window.optimizely?(window.optimizely.push(["trackEvent","login_success"]),setTimeout((function(){null==a?location.reload():location.href=a}),500)):null==a?location.reload():location.href=a},handlePostRegRedirect:function(e,s,r){var a=r.hasOnboarding;jQuery.isFunction(e)?e():null==s||r.onboardingBeforePostRegUrlEnabled?a&&!sbxJxAjaxVars.shouldReloadOnReg?location.href="/onboarding":location.reload():""!=s&&sbxJxAjaxVars.shouldReloadOnReg?location.reload():location.href=s},renderError:function(e){var s,a=$(".divErLandingPage"),n="",t=window.banner&&"function"==typeof banner.create,i=sbxJxRegFunctions.getActiveFormEmail();a.length&&sbxJxRegVars.showErrorMsgInline&&(s=a).html(""),jQuery.each(e,(function(o,l){if("coppa"!=o){if(e.hasOwnProperty(o)){var d=l[0],g=sbxJxRegVars.inputFldErrorClass,x="object"==typeof sbGlbl&&"number"==typeof sbGlbl.cmp&&(594===sbGlbl.cmp||607===sbGlbl.cmp)&&"EmailAddress_NotExists"===d;x&&(d="EmailAddress_AlreadyMember",g=sbxJxRegVars.inputFldNotificationClass);var u=sbxJxRegUx.errorMsgs[d];u||location.reload();var b=u.elms,c=r[d];jQuery.each(b,(function(r,i){if(jQuery(i).addClass(g),0==r){if(a.length&&sbxJxRegVars.showErrorMsgInline)e.login&&"Login_IsValid"==e.login[0]?jQuery(s).html("Incorrect Email/Password Combination"):jQuery(s).append(c+"<br>");else{if(t)return n+=c+". ",!0;s=jQuery(i).parent().children("."+sbxJxRegVars.inputErrMsgClass),jQuery(s).html(c),x&&jQuery(s).addClass(sbxJxRegVars.inputNotificationMsgClass)}jQuery(s).fadeIn(200)}})),"Location_AcceptsRegistration"===d?($("#sbUnsupportedRegFormSuccess").addClass("success"),$("#sbRegForm").hide()):"EmailAddress_NotExists"===d&&"function"==typeof sbPage.onSignupExistingAccount&&sbPage.onSignupExistingAccount(i)}}else location.href=sbtbDomain+"/g/under-age"})),t&&n&&banner.create({color:"red",html:n,timer:10,removeOthers:!0})},toggleRegLogin:function(e){if(jQuery(".glblInputLine input").val(""),this.clearErrs(),(e=void 0!==e&&e.toLowerCase())||(sbxJxRegVars.curOption="Login"==sbxJxRegVars.curOption?"Reg":"Login"),elms=Array(jQuery("#SESWelcomeSignUp h1"),jQuery("#SESWelcomeSignUp h3"),jQuery("#SEInputLineEmail h4"),jQuery("#sbxJxRegBtnSubmit"),jQuery("#optionToggleSp"),jQuery("#optionToggleA"),jQuery("#optionToggleSpHeader"),jQuery("#oneClickSignUpString")),sbxJxRegVars.curOption,"Reg"==sbxJxRegVars.curOption)jQuery.each(elms,(function(e,s){jQuery(s).html(jQuery(s).attr("alt"+sbxJxRegVars.curOption))})),$("#SEInputLinePassConfirm, #signUpCodeLine").animate({opacity:1},200),$("#glblWelcomeLoginAction").hide(),$("#loggedOutTermsLnk").show(),$("#loggedOutTermsLnk").animate({height:34}),$("#sbxJxRegBtnSubmit").unbind().bind("click",(function(e){if(t())return e.preventDefault(),!1;sbxJxRegFunctions.handleRegister("undefined"!=typeof emailOnly||sbPage.emailOnlySignup,window.customRedirectUrl||sbPage.postSignupRedirectUrl)})),sbxJxRegVars.curOption="Reg";else{var s=encodeURIComponent($("#SESignUpInitial").attr("data-src-link"));document.location.href="undefined"==s?"?cmd=ac-login-set-alternate-rdr&rdr=":"?cmd=ac-login-set-alternate-rdr&rdr="+s}jQuery("#sbxJxRegEmail").focus()},clearErrs:function(e,s){var r;s=!0,e?(r=jQuery(e).parent().children("."+sbxJxRegVars.inputErrMsgClass),jQuery(e).removeClass(sbxJxRegVars.inputFldErrorClass)):(r=jQuery("."+sbxJxRegVars.inputErrMsgClass),jQuery("."+sbxJxRegVars.inputFldErrorClass).removeClass(sbxJxRegVars.inputFldErrorClass)),r.removeClass(sbxJxRegVars.inputNotificationMsgClass),s?r.hide():r.fadeOut()},attachEvents:function(){sbxJxRegVars.fldEmail.add(sbxJxRegVars.fldEmail2).bind("keyup",(function(){emailAddressStrokeCount++})).bind("click",(function(){emailAddressClickCount++})),sbxJxRegVars.fldPass.bind("keyup",(function(){passwordStrokeCount++})).bind("click",(function(){passwordClickCount++})),sbxJxRegVars.fldPassConfirm.bind("keyup",(function(){passwordConfirmStrokeCount++})).bind("click",(function(){passwordConfirmClickCount++})),sbxJxRegVars.fldEmail.add(sbxJxRegVars.fldEmail2).add(sbxJxRegVars.fldPass).add(sbxJxRegVars.fldPassConfirm).add(sbxJxRegVars.fldPromocode).add(sbxJxRegVars.fldCxid).unbind("keyup.submitTbform").bind("keyup.submitTbform",(function(e){var s=e.which||e.keyCode,r=sbxJxRegVars.curOption.toLowerCase(),a=document.activeElement,n=sbxJxRegVars.fldPromocode;return!$(".bannerCont").length&&(!n.length||!a||a.id!==n[0].id)&&(13==s&&"login"==r?sbxJxRegFunctions.handleLogin():13==s&&"reg"==r?sbxJxRegFunctions.handleRegister("undefined"!=typeof emailOnly||sbPage.emailOnlySignup,window.customRedirectUrl||sbPage.postSignupRedirectUrl):(27==s&&$("#SESignUpInitial").is(":visible")&&$(".sbPopClose").click(),void sbxJxRegUx.clearErrs(this,!0)))}))},toggleSignUpCode:function(){var e=$("#signUpCodeLabel"),s=e.siblings("#signUpCodeInput");e.is(":animated")||(e.animate({textIndent:0!=parseInt(e.css("textIndent"))?0:-165}),s.is(":visible")?s.fadeOut("fast"):s.fadeIn("fast").focus())}},sbHelpers.onDomContentLoaded(a)}(),ErrorCollection.prototype.isEmpty=function(){for(var e in this)if(this.hasOwnProperty(e))return!1;return!0},ErrorCollection.prototype.push=function(e,s){e in this?this[e].push(s):this[e]=[s]};