!function(){"use strict";var e={$mobileNavWrap:$("#mobileControlsWrap"),$mobileControlWraps:$(".mobileControlWrap"),$mobileMainSecs:$(".mobileMainSec"),$mobileMainImages:$(".mobileMainImage"),desktopAsideNavTmpl:$.template('<aside class="mobileMainDesktopNav"><button class="sbCta mobileMainDesktopNavPrev"><span class="sbVisuallyHidden">Prev</span></button><button class="sbCta mobileMainDesktopNavNext"><span class="sbVisuallyHidden">Next</span></button></aside>'),boolIsPanGestureActive:!1};function t(e){if($(e).get(0)){var t=$(e).get(0).getBoundingClientRect();return{elementRight:t.right,elementLeft:t.left,viewportWidth:$(window).width()}}}function i(e){var i=t(e);return!i||i.elementRight<i.viewportWidth&&i.elementLeft>0}function n(){for(var e=$(".mobileMainContent"),t=sbPage.$$head,i=t.offsetHeight+t.offsetTop,n=0,a=e.length;n<a;n++)e[n].style.paddingTop=i+"px"}function a(n){var a=e.$mobileMainSecs;n==a.length&&(n=0),a.eq(n).addClass("visible").siblings().removeClass("visible");var o=e.$mobileControlWraps.eq(n);if(o.addClass("active").siblings().removeClass("active"),!i(o)){var s=t(o),l=s.elementRight,r=s.viewportWidth,d=e.$mobileNavWrap;l>r?d.animate({left:"-="+(l-r)}):s.elementLeft<0&&d.animate({left:0})}}if(e.$mobileMainSecs.length>1){e.$mobileControlWraps.bind("click",(function(){var e=$(this);a(e.index()),e.addClass("active").siblings().removeClass("active")})),e.$mobileMainSecs.each((function(){var t=$(this),i=t.index(),n=i+1,o=i-1;t.swipe({swipeLeft:function(){a(n)},swipeRight:function(){a(o)},preventDefaultEvents:!1,threshold:5,excludedElements:"button"}),t.prepend($.tmpl(e.desktopAsideNavTmpl)),t.find(".mobileMainDesktopNavPrev").click((function(){a(o)})),t.find(".mobileMainDesktopNavNext").click((function(){a(n)}))})),e.$mobileNavWrap.swipe({swipeStatus:function(t,n,a,o,s,l,r){var d=this,b=e.$mobileNavWrap,c=e.$mobileControlWraps,v=0,f=c.length;if([].forEach.call(c,(function(e,t){i($(c[t]))&&v++})),!(v>=f||isNaN(v)))if("cancel"!==n&&"end"!==n){e.boolIsPanGestureActive=!0;var m={};if(!(Object.keys(r).length>0))return;for(var p in r)r.hasOwnProperty(p)&&(m=r[p]);"left"!==a&&"right"!==a||(d.boolIsPanCoordX0Saved||(d.intPanCoordX0=parseInt(b.css("left")),d.boolIsPanCoordX0Saved=!0),d.intPanCoordX1=d.intPanCoordX0+(m.end.x-m.start.x),b.css("left",d.intPanCoordX1))}else{if("left"===a||"right"===a){var u=b.width()-$(window).width();d.intPanCoordX1>0||v>=f?b.animate({left:0}):Math.abs(d.intPanCoordX1)>=u&&b.animate({left:-u})}d.intPanCoordX0=null,d.boolIsPanCoordX0Saved=!1,e.boolIsPanGestureActive=!1}},preventDefaultEvents:!1,threshold:5}),n();var o=document.location.hash.substring(1),s=e.$mobileControlWraps.eq(0);if(o){var l=e.$mobileControlWraps.filter((function(){return $(this).data("tab-name")===o}));s=l.length?l:s}s.trigger("click")}else $("#mobileControlsOuterWrap").hide();window.addEventListener("resize",(function(){n()})),sbPage.$window.bind("resize.topbarRefresh",n)}();